<section class="text-white bg-[#10141B] pt-20">
    <!-- poster -->
    <div class="w-full h-[250px] md:h-[300px] xl:h-[473px] relative wrapper">
        <div class="absolute inset-0 w-full h-full">
            <img src="../assets/img-movie-1.webp" alt="ANH KHÔNG ĐAU-T18" class="object-cover img-css-detail">
        </div>
        <div class="absolute bg-primary/60 inset-0 w-full h-full z-10"></div>

        <div class="hidden xl:block absolute w-full inset-0 m-auto z-20">
            <div class="w-full max-w-4xl m-auto h-[473px] py-7 pt-24 flex gap-10">
                <div class="relative h-[333px] min-w-[238px] shadow-lg">
                    <img sizes="238px" src="../assets/img-movie-1.webp" 
                                        srcset="../assets/img-movie-1.webp 16w, 
                                                ../assets/img-movie-1.webp 32w, 
                                                ../assets/img-movie-1.webp 48w, 
                                                ../assets/img-movie-1.webp 64w, 
                                                ../assets/img-movie-1.webp 96w, 
                                                ../assets/img-movie-1.webp 128w, 
                                                ../assets/img-movie-1.webp 256w, 
                                                ../assets/img-movie-1.webp 384w, 
                                                ../assets/img-movie-1.webp 640w, 
                                                ../assets/img-movie-1.webp 750w, 
                                                ../assets/img-movie-1.webp 828w, 
                                                ../assets/img-movie-1.webp 1080w, 
                                                ../assets/img-movie-1.webp 1200w, 
                                                ../assets/img-movie-1.webp 1920w, 
                                                ../assets/img-movie-1.webp 2048w, 
                                                ../assets/img-movie-1.webp 3840w"  
                                        alt="ANH KHÔNG ĐAU-T18" class="object-cover rounded-xl img-css-detail">
                </div>
                <div class="text-sm flex flex-col">
                    <div class="flex items-center gap-2 mt-2">
                        <h3 class="font-bold text-2xl">{{movie.name}}</h3>
                        <div class="rounded-xl p-2 border border-white font-bold">{{ movie.version === 1 ? '2D' : 'N/A' }}</div>
                    </div>
                    <div class="flex items-center mt-2 gap-5 text-sm">
                        <p>Hài, Hành động</p>
                        <p>{{ movie.origin}}</p>
                        <p>{{movie.duration}} Min</p>
                        <p>Directors: {{movie.director}}</p>
                    </div>
                    <p>Actors: {{movie.actors}}</p>
                    <p>Release: {{movie.releaseDate}}</p>
                    <p class="mt-5 line-clamp-4">{{movie.description}}</p>
                    <div class="text-red-500 mt-5">Rating: T18 - The film is intended for viewers aged 18 and above (18+).</div>
                    <div class="mt-2 flex items-center gap-4 flex-1">
                        <button type="button" class="text-sm underline hover:cursor-pointer">Plot details</button>
                        <button class="border border-yellow-500 rounded-full py-2 px-10 text-yellow-500 hover:scale-105 hover:cursor-pointer" type="button">Watch trailer</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- Responsive -->
    <div class="relative block xl:hidden px-4 md:px-6 pb-10 -mt-[120px] z-30">
        <div class="flex items-center gap-4">
            <div class="h-[200px] w-full max-w-[150px] md:w-[200px] md:max-w-[200px] md:h-[250px] relative">
                <img alt="NGHỀ SIÊU KHÓ NÓI-T18" class="object-cover rounded-xl shadow-lg img-css-detail" sizes="(min-width: 780px) 200px, (min-width: 360px) 150px, calc(72.5vw - 98px)" 
                        srcset="../assets/img-movie-1.webp 16w, 
                        ../assets/img-movie-1.webp 32w, 
                        ../assets/img-movie-1.webp 48w, 
                        ../assets/img-movie-1.webp 64w, 
                        ../assets/img-movie-1.webp 96w, 
                        ../assets/img-movie-1.webp 128w, 
                        ../assets/img-movie-1.webp 256w, 
                        ../assets/img-movie-1.webp 384w, 
                        ../assets/img-movie-1.webp 640w, 
                        ../assets/img-movie-1.webp 750w, 
                        ../assets/img-movie-1.webp 828w, 
                        ../assets/img-movie-1.webp 1080w, 
                        ../assets/img-movie-1.webp 1200w, 
                        ../assets/img-movie-1.webp 1920w, 
                        ../assets/img-movie-1.webp 2048w, 
                        ../assets/img-movie-1.webp 3840w">
                    </div>
                    <div>
                        <div class="flex items-center gap-2 mt-2">
                            <h3 class="font-bold md:text-xl">{{movie.name}}</h3>
                            <div class="rounded-md p-1 border border-white font-bold text-sm md:text-base">{{ movie.version === 1 ? '2D' : 'N/A' }}</div>
                        </div>
                        <div class="flex items-center mt-2 gap-x-2 text-sm md:text-base flex-wrap">
                            <p>Hài, Hành động</p>
                            <p>{{ movie.origin}}</p>
                            <p>{{ movie.duration}} Min</p>
                        </div>
                    </div>
                </div>
                <div class="text-sm flex flex-col mt-4">
                    <div class="flex items-center mt-2 gap-5 text-sm md:text-base">
                        <p>{{ movie.director}}</p>
                    </div>
                    <p>Actors: {{ movie.actors}}</p>
                    <p>Release: {{ movie.releaseDate}}</p>
                    <p class="mt-4 line-clamp-4">A man who cannot feel physical pain turns his rare condition into an unexpected advantage in a life-or-death battle to rescue the girl of his dreams.</p>
                <div class="text-red-500 mt-5">Rating: T18 - The film is intended for viewers aged 18 and above (18+).</div>
                <div class="mt-4 flex items-center justify-center gap-4 flex-1">
                <button type="button" class="text-sm underline">Plot details</button>
                <button class="border border-yellow-500 rounded-full py-2 px-10 text-yellow-500 hover:scale-105" type="button">Watch trailer</button>
            </div>
        </div>
    </div>
    <div class="w-full">
        <div class="flex h-[91px] justify-center bg-[#1A1D23]">
            <button class="focus:border-none focus:outline-none" 
            type="button" aria-selected="true" tabindex="0" 
            data-headlessui-state="selected" aria-controls="headlessui-tabs-panel-:r60:" 
            disabled="">
            <div class="w-[72px] h-full flex flex-col items-center justify-center text-xs transition-colors bg-red-600">
                <p>Th. 03</p>
                <p class="text-xl font-bold">19</p>
                <p>Thứ tư</p>
            </div>
        </button>
        </div>
        <div class="text-sm text-center mx-4 md:px-6 lg:mx-auto mt-4 text-orange-500">
            <b>Note:</b> Viewers under 13 years old may only select screenings that end before 10:00 PM, and viewers under 16 years old may only select screenings that end before 11:00 PM.
        </div>

        <!-- Select seat -->
         <div>
            <div>
                <div class="mx-auto max-w-7xl">
                    <div class="pb-10 pt-5 w-full xl:w-3/4 mx-auto px-4 xl:px-0">
                        <div class="flex items-center justify-between mb-5">
                            <div class="text-sm md:text-base self-end">
                                Time start: 
                                <span class="font-bold">{{ showtime.startTime}}</span>
                            </div>
                        </div>
                        <div>
                            <div class="mb-4 text-center font-bold text-lg">
                                {{ room.name}}
                            </div>
                            <!-- Seats matrix -->
                             <div class="space-y-1 -mx-4">
                                <div *ngFor="let row of groupSeatsByRow() | keyvalue">
                                    <div class="grid md:flex gap-1 items-center justify-center seat">
                                        <div class="aspect-square w-3 sm:w-6 xl:h-10 xl:w-10 rounded-[2px] sm:rounded-sm xl:rounded-[8px] flex items-center justify-center text-[8px] sm:text-sm lg:hidden">{{row.key}}</div>
                                        <!-- Danh sách ghế -->
                                        <div
                                        *ngFor="let seat of row.value"
                                        class="aspect-square rounded-[2px] sm:rounded-sm xl:rounded-[8px] flex items-center justify-center md:h-6 lg:h-10 cursor-pointer transition-all duration-300"
                                        [ngClass]="{
                                            'seat-color-click md:bg-[#252A31] text-white': seat.seatStatus === 1 && !seat.isActive,
                                            'seat-color-nor text-white': seat.seatStatus !== 2 && seat.isActive && seat.seatType === 1,
                                            'seat-color-booked cursor-not-allowed text-white': seat.seatStatus === 2
                                        }"
                                        (click)="toggleSeatSelection(seat)">
                                        <ng-container *ngIf="seat.seatStatus === 2; else normalSeat">
                                            <p class="hidden lg:block text-sm lg:text-base">
                                                X
                                              </p>
                                          </ng-container>
                                          <ng-template #normalSeat>
                                            <p class="hidden lg:block text-sm lg:text-base">
                                              {{ seat.row + seat.column }}
                                            </p>
                                          </ng-template>
                                        </div>
                                        <div class="aspect-square w-3 sm:w-6 xl:h-10 xl:w-10 rounded-[2px] sm:rounded-sm xl:rounded-[8px] flex items-center justify-center text-[8px] sm:text-sm lg:hidden">{{row.key}}</div>
                                    </div>

                                </div>
                             </div>
                             <!-- Select seat and type seat -->
                             <div class="flex items-center justify-center gap-4 xl:gap-8 mt-8 flex-wrap text-sm md:text-base">
                                <div class="flex gap-2 items-center">
                                    <div class="aspect-square xl:h-8 xl:w-8 w-4 sm:w-6 bg-gray-700 md:bg-[#3A3F46] flex items-center justify-center rounded-[4px] xl:rounded-[8px]">
                                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-gray-300 md:text-gray-500 h-2 w-2 md:h-6 md:w-6">
                                            <path d="M18 6 6 18"></path>
                                            <path d="m6 6 12 12"></path>
                                        </svg>
                                    </div>
                                    Selected
                                </div>
                                <div class="flex gap-2 items-center">
                                    <div class="aspect-square xl:h-8 xl:w-8 w-4 sm:w-6 bg-gray-700 md:bg-[#3A3F46] flex items-center justify-center rounded-[4px] xl:rounded-[8px]">
                                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-gray-300 md:text-gray-500 h-2 w-2 md:h-6 md:w-6">
                                            <path d="M18 6 6 18"></path>
                                            <path d="m6 6 12 12"></path>
                                        </svg>
                                    </div>
                                    Your select
                                </div>
                                <div class="flex gap-2 items-center">
                                    <div class="aspect-square xl:h-8 xl:w-8 w-4 sm:w-6 bg-gray-700 md:bg-[#3A3F46] flex items-center justify-center rounded-[4px] xl:rounded-[8px]">
                                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-gray-300 md:text-gray-500 h-2 w-2 md:h-6 md:w-6">
                                            <path d="M18 6 6 18"></path>
                                            <path d="m6 6 12 12"></path>
                                        </svg>
                                    </div>
                                    Standard
                                </div>
                                <div class="flex gap-2 items-center">
                                    <div class="aspect-square xl:h-8 xl:w-8 w-4 sm:w-6 bg-gray-700 md:bg-[#3A3F46] flex items-center justify-center rounded-[4px] xl:rounded-[8px]">
                                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-gray-300 md:text-gray-500 h-2 w-2 md:h-6 md:w-6">
                                            <path d="M18 6 6 18"></path>
                                            <path d="m6 6 12 12"></path>
                                        </svg>
                                    </div>
                                    VIP
                                </div>
                                <div class="flex gap-2 items-center">
                                    <div class="aspect-square xl:h-8 xl:w-8 w-4 sm:w-6 bg-gray-700 md:bg-[#3A3F46] flex items-center justify-center rounded-[4px] xl:rounded-[8px]">
                                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-gray-300 md:text-gray-500 h-2 w-2 md:h-6 md:w-6">
                                            <path d="M18 6 6 18"></path>
                                            <path d="m6 6 12 12"></path>
                                        </svg>
                                    </div>
                                    Sweetbox
                                </div>
                             </div>

                             <!-- payment button -->
                             <div class="flex items-center justify-between w-full mt-8 flex-wrap gap-y-4">
                                <div>
                                    <p>Your selection: 
                                        <span class="font-semibold"></span>
                                    </p>
                                    <p>Total: 
                                        <span class="font-semibold">0đ</span>
                                    </p>
                                </div>
                                <div class="flex items-center justify-center gap-2 w-full xl:w-auto">
                                    <button [routerLink]="['/showtime']" class="inline-flex items-center justify-center rounded-full text-sm font-medium ring-offset-background 
                                    transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 
                                    disabled:pointer-events-none disabled:opacity-50 border border-input bg-transparent hover:cursor-pointer hover:bg-accent hover:text-accent-foreground 
                                    h-10 px-8 py-2">
                                    Cancel
                                    </button>
                                    <button (click)="confirmSeats()" class="inline-flex items-center justify-center rounded-full text-sm font-medium ring-offset-background focus-visible:outline-none 
                                    focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 bg-danger 
                                    text-destructive-foreground hover:bg-blue-500 h-10 px-8 py-2 hover:scale-105 transition duration-300 hover:cursor-pointer">
                                    Continue
                                    </button>

                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
         </div>
    </div>
</section>
