<div
  class="fixed transform translate-y-[-50%] top-1/2 left-1/2 translate-x-[-50%] flex items-center justify-center z-50 shadow-[10px_20px_35px_rgba(0,0,0,0.25)] shadow-slate-800"
>
  <!-- Register Box -->
  <div
    class="bg-[#0B0D13] px-6 py-4 *:text-white shadow-lg rounded-lg w-screen max-h-screen lg:w-[1000px] overflow-x-auto"
  >
    <div class="flex justify-between items-center mb-4">
      <h2 class="text-2xl font-semibold text-center w-full">REGISTER</h2>
      <button
        title="Close modal"
        type="button"
        class="text-white pl-4 py-2 rounded-md cursor-pointer"
        (click)="closeModal()"
      >
        <fa-icon [icon]="faTimes" class="text-2xl"></fa-icon>
      </button>
    </div>

    <form
      [formGroup]="form"
      (ngSubmit)="onSubmit()"
      class="grid grid-cols-1 md:grid-cols-2 gap-4"
    >
      <div>
        <label for="firstName" class="block mb-2">First Name</label>
        <input
          type="text"
          formControlName="firstName"
          class="w-full bg-[#0B0D13] px-3 py-2 border rounded-md focus:outline-none focus:ring focus:border-gray-400"
          placeholder="Enter first name"
          required
          [ngClass]="{
            'border-red-500 bg-red-100 text-red-500':
              form.get('firstName')?.invalid && form.get('firstName')?.touched
          }"
        />
        <span
          *ngIf="
            form.get('firstName')?.invalid && form.get('firstName')?.touched
          "
          class="text-red-500 text-sm"
        >
          First name is required
        </span>
      </div>

      <div class="form-group mb-2">
        <label for="lastName" class="block mb-2">Last name</label>
        <input
          type="text"
          formControlName="lastName"
          class="w-full bg-[#0B0D13] px-3 py-2 border rounded-md focus:outline-none focus:ring focus:border-gray-400"
          placeholder="Enter last name"
          required
          [ngClass]="{
            'border-red-500 bg-red-100 text-red-500':
              form.get('lastName')?.invalid && form.get('lastName')?.touched
          }"
        />
        <span
          *ngIf="form.get('lastName')?.invalid && form.get('lastName')?.touched"
          class="text-red-500 text-sm"
        >
          Last name is required
        </span>
      </div>
      <div>
        <label for="username" class="block mb-2">Username</label>
        <input
          type="text"
          formControlName="username"
          class="w-full bg-[#0B0D13] px-3 py-2 border rounded-md focus:outline-none focus:ring focus:border-gray-400"
          placeholder="Enter username"
          required
          [ngClass]="{
            'border-red-500 bg-red-100 text-red-500':
              form.get('username')?.invalid && form.get('username')?.touched
          }"
        />
        <span
          *ngIf="form.get('username')?.invalid && form.get('username')?.touched"
          class="text-red-500 text-sm"
        >
          Username is required
        </span>
      </div>
      <div>
        <label for="email" class="block mb-2">Email</label>
        <input
          type="email"
          formControlName="email"
          class="w-full bg-[#0B0D13] px-3 py-2 border rounded-md focus:outline-none focus:ring focus:border-gray-400"
          placeholder="Enter email"
          required
          [ngClass]="{
            'border-red-500 bg-red-100 text-red-500':
              form.get('email')?.invalid && form.get('email')?.touched
          }"
        />
        <span
          *ngIf="form.get('email')?.invalid && form.get('email')?.touched"
          class="text-red-500 text-sm"
        >
          Email is required with at least 3 characters and at most 50 characters
        </span>
      </div>

      <div>
        <label for="dateOfBirth" class="block mb-2">Date of Birth</label>
        <div class="relative">
          <input
            title="Date of Birth"
            formControlName="dateOfBirth"
            type="date"
            class="w-full bg-[#0B0D13] text-white px-3 py-2 border rounded-md focus:outline-none focus:ring focus:border-gray-400 appearance-none"
          />
          <span
            class="absolute right-3 top-1/2 transform -translate-y-1/2 text-white pointer-events-none"
          >
            <fa-icon [icon]="faCalendar"></fa-icon>
          </span>
        </div>
      </div>

      <div>
        <label for="gender" class="block mb-2">Gender</label>
        <div class="flex gap-4 py-2">
          <label class="flex items-center">
            <input
              type="radio"
              formControlName="gender"
              value="Male"
              class="mr-2"
              checked
            />
            Male
          </label>
          <label class="flex items-center">
            <input
              type="radio"
              formControlName="gender"
              value="Female"
              class="mr-2"
            />
            Female
          </label>
        </div>
      </div>

      <div>
        <label for="identityCard" class="block mb-2">Identity Card</label>
        <input
          type="text"
          formControlName="identityCard"
          class="w-full bg-[#0B0D13] px-3 py-2 border rounded-md focus:outline-none focus:ring focus:border-gray-400"
          placeholder="Enter identity card number"
          required
          [ngClass]="{
            'border-red-500 bg-red-100 text-red-500':
              form.get('identityCard')?.invalid &&
              form.get('identityCard')?.touched
          }"
        />
        <span
          *ngIf="
            form.get('identityCard')?.invalid &&
            form.get('identityCard')?.touched
          "
          class="text-red-500 text-sm"
        >
          Enter a valid identity card (10-18 digits).
        </span>
      </div>

      <div>
        <label for="phoneNumber" class="block mb-2">Phone Number</label>
        <input
          type="tel"
          formControlName="phoneNumber"
          class="w-full bg-[#0B0D13] px-3 py-2 border rounded-md focus:outline-none focus:ring focus:border-gray-400"
          placeholder="Enter phone number"
          required
          [ngClass]="{
            'border-red-500 bg-red-100 text-red-500':
              form.get('phoneNumber')?.invalid &&
              form.get('phoneNumber')?.touched
          }"
        />
        <span
          *ngIf="
            form.get('phoneNumber')?.invalid && form.get('phoneNumber')?.touched
          "
          class="text-red-500 text-sm"
        >
          Enter a valid phone number (10-15 digits).
        </span>
      </div>

      <div>
        <label for="password" class="block mb-2">Password</label>
        <input
          type="password"
          formControlName="password"
          class="w-full bg-[#0B0D13] px-3 py-2 border rounded-md focus:outline-none focus:ring focus:border-gray-400"
          placeholder="Enter password"
          required
          [ngClass]="{
            'border-red-500 bg-red-100 text-red-500':
              form.get('password')?.invalid && form.get('password')?.touched
          }"
        />
        <span
          *ngIf="form.get('password')?.invalid && form.get('password')?.touched"
          class="text-red-500 text-sm"
        >
          Password must include at least 1 uppercase, 1 lowercase, 1 digit, and
          1 special character.
        </span>
      </div>

      <div>
        <label for="confirmPassword" class="block mb-2">Confirm Password</label>
        <input
          type="password"
          formControlName="confirmPassword"
          class="w-full bg-[#0B0D13] px-3 py-2 border rounded-md focus:outline-none focus:ring focus:border-gray-400"
          placeholder="Confirm password"
          required
          [ngClass]="{
            'border-red-500 bg-red-100 text-red-500':
              form.get('confirmPassword')?.invalid &&
              form.get('confirmPassword')?.touched
          }"
        />
        <span
          *ngIf="
            form.get('confirmPassword')?.invalid &&
            form.get('confirmPassword')?.touched
          "
          class="text-red-500 text-sm"
        >
          Confirm password is required
        </span>
        <span
          *ngIf="form.errors?.['passwordMismatch'] && 
              form.get('confirmPassword')?.dirty"
          class="text-red-500 text-sm"
        >
          Passwords do not match
        </span>
      </div>
      <p
        *ngIf="errorMessage"
        class="md:col-span-2 my-2 text-red-500 text-center text-sm italic"
      >
        {{ errorMessage }}
      </p>
      <div class="md:col-span-2">
        <button
          type="submit"
          class="w-full bg-[#EF4444] text-white py-2 rounded-md hover:bg-[#E30713] cursor-pointer transition disabled:bg-gray-400 disabled:text-gray-200 disabled:cursor-not-allowed"
          [disabled]="form.invalid || errorMessage"
        >
          Register
        </button>
      </div>
    </form>
    <p class="text-center mt-4 border-t pt-4 border-gray-300">
      Already have an account?
      <a
        (click)="openModal()"
        class="text-[#EF4444] hover:underline cursor-pointer"
        >Login now!</a
      >
    </p>
  </div>
</div>
